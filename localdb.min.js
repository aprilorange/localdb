"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();!function(){function t(t){for(var e=0;e<t.length;e++)if(!t[e])return!1;return!0}function e(){var t=((new Date).getTime()/1e3|0).toString(16);return t+"xxxxxxxxxxxxxxxx".replace(/[x]/g,function(){return(16*Math.random()|0).toString(16)}).toLowerCase()}var r={limit:0,sortBy:"index",sort:1,skip:0},i=function(i,n){var s=function(){function i(t){var e=arguments.length<=1||void 0===arguments[1]?"Array":arguments[1],r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];if(_classCallCheck(this,i),"string"==typeof t)this.db=t,this.type=e,this.timestamp=r;else if("object"==typeof t){var n=t;this.db=n.name,this.type=n.type||"Array",this.timestamp=n.timestamp||!1}}return _createClass(i,[{key:"get",value:function(t){var e=JSON.parse(n.getItem(this.db));return t||"number"==typeof t?"undefined"!=typeof e&&e?e[t]:null:e}},{key:"findOne",value:function(t){return this.find(t,{limit:1})}},{key:"find",value:function(e){var i=arguments.length<=1||void 0===arguments[1]?r:arguments[1];if("Array"!==this.type)return console.error("The .findOne method only works if the database is an Array!");i.limit=i.limit||r.limit,i.sortBy=i.sortBy||r.sortBy,i.sort=i.sort||r.sort,i.skip=i.skip||r.skip;var n=this.get()||[];return e&&(n=n.filter(function(r){var i=[];for(var n in e)i.push(r[n]===e[n]);return t(i)?!0:!1})),1===i.limit&&0===i.skip?n[0]:(n=n.sort(function(t,e){return t[i.sortBy]<e[i.sortBy]?-i.sort:t[i.sortBy]>e[i.sortBy]?i.sort:0}),0===i.limit?n.slice(i.skip):n.slice(i.skip,i.limit+i.skip))}},{key:"add",value:function(t){"Array"!==this.type&&console.error("The .add method only works if the database is an Array!");var e=this.get()||[],r=0;return e&&e.length>0&&(r=e.length),t=this.initObj(r,t),e.push(t),this.override(e),this}},{key:"initObj",value:function(t,r){return r.index=t,r._id=e(),this.timestamp&&(r.createdAt=new Date,r.updatedAt=new Date),r}},{key:"set",value:function(t,e){if("Object"!==this.type)console.error("The .set method only works if the database is an Object!");else{var r=this.get()||{};r[t]=e,this.override(r)}return this}},{key:"save",value:function(t){"Array"!==this.type&&console.error("The .save method only works if the database is an Array!");var e=this.get();return e[t.index]._id===t._id&&(e[t.index]=t,this.override(e)),this}},{key:"override",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];if("Array"===this.type&&e)for(var r=0;r<t.length;r++)t[r]=this.initObj(r,t[r]);return n.setItem(this.db,JSON.stringify(t)),this}},{key:"remove",value:function(t,e){var r=this.get();if("Array"===this.type){if(0===r.length)return this;r=r.filter(function(r){return r[t]===e?!1:!0});for(var i=0;i<r.length;i++)r[i].index=i}else"Object"===this.type&&delete r[t];return n.setItem(this.db,JSON.stringify(r)),this}},{key:"destroy",value:function(){return n.removeItem(this.db),this}}]),i}();return s};!function(t,e,r){"undefined"!=typeof module?module.exports=r:"undefined"!=typeof t&&(t[e]=r)}(window,"localdb",i(window,window.localStorage))}();
//# sourceMappingURL=localdb.min.js.map